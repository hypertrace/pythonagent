[tox]
envlist = test_grpc_instrumentation
skipsdist = true

[testenv]
install_command = pip install {opts} {packages}
basepython= python3.7

[testenv:test_grpc_instrumentation]
deps =
    -rrequirements.txt

setenv =
  PYTHONPATH=../..
  OTEL_TRACES_EXPORTER=zipkin
  OTEL_EXPORTER_ZIPKIN_ENDPOINT=http://localhost:9411/api/v2/spans
commands =
    pytest -rPx test_grpc_1.py
#   pytest -rPx test_grpc_2.py # Broken until future release of otel grpc instrumentation module

recreate = True

